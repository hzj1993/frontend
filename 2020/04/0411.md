### ** 《极客时间-趣谈网络协议》第7讲~第12讲 **

1、ping是基于ICMP协议工作的。使用查询报文

2、ICMP报文有多种类型：查询报文类型、差错报文类型等

3、Traceroute（差错报文类型的使用）：
故意设置特殊的 TTL，来追踪去往目的地时沿途经过的路由器；
故意设置不分片，从而确定路径的 MTU。

4、网关往往是一个路由器，是一个三层转发的设备

5、Network Address Translation，简称 NAT；局域网ip地址与外网ip地址的转换

6、寻找最短路径：距离矢量路由算法（基于 Bellman-Ford 算法）、链路状态路由算法（基于 Dijkstra 算法）

7、距离矢量路由算法的问题：好消息传得快，坏消息传得慢；每次发送的时候，要发送整个全局路由表。

8、基于链路状态路由算法的 OSPF，主要用在数据中心内部

9、基于距离矢量路由算法的 BGP，主要用于外网，就是AS之间

###### 10、** UDP协议 **
`UDP 继承了 IP 包的特性，不保证不丢失，不保证按顺序到达`

`UDP 继承了 IP 的特性，基于数据报的，一个一个地发，一个一个地收`

`UDP 不会阻塞控制`

`UDP 则是无状态服务`

`UDP 头部有：源端口号、目的端口号、UDP长度、UDP校验和、数据`

`UDP 3大特点：
1、没有大量的数据结构、处理逻辑、包头字段；
2、谁都可以传给他数据，他也可以传给任何人数据，甚至可以同时传给多个人数据；
3、它不会根据网络的情况进行发包的拥塞控制`

`UDP三大使用场景：
1、需要资源少，网络情况好的内网，或者丢包不敏感的应用；
2、不需要一对一沟通，二十可以广播的应用；
3、 需要处理速度快，时延低，可容忍少数丢包，但是要求即使网络拥塞，也毫不退让`

`UDP应用例子：google提出的QUIC、直播、实时游戏、IoT物联网、移动通信领域4G`

`UDP 相比于 TCP 比较简单；虽然简单，但是也有其用法`


###### 11、** TCP协议 **

`文章链接：https://time.geekbang.org/column/article/8975`

`TCP提供可靠交付；面向字节流；有拥塞控制；有状态服务`

`TCP头：源端口号、目的端口号、序号32位、确认序号32位、状态位、窗口大小16位、校验和、紧急指针、选项、数据...`

`序号解决乱序问题`

`确认序号解决不丢包问题`

`状态位解决维持状态问题`

`窗口大小可以解决流量控制和拥塞控制`

`掌握 TCP 协议，重点应该关注以下几个问题：
顺序问题 ，稳重不乱；
丢包问题，承诺靠谱；
连接维护，有始有终；
流量控制，把握分寸；
拥塞控制，知进知退。`

###### ** TCP 的三次握手 **

`三次握手除了双方建立连接外，主要还是为了沟通一件事情，就是 TCP 包的序号的问题`

`有客户端发起`

详情配合文章链接里面的图来理解

###### ** TCP 的四次挥手 **

`双方都可以发起`

`MSL 是 Maximum Segment Lifetime，报文最大生存时间。协议规定 MSL 为 2 分钟，实际应用中常用的是 30 秒，1 分钟和 2 分钟等`

详情配合文章链接里面的图来理解

`累计确认或者累计应答发生在接收端`

`https://time.geekbang.org/column/article/9141`

结合里面的语音和图理解顺序问题、流量控制和拥塞解决